<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<iframe src="http://192.168.0.71:8001/b.html" id="ifr"></iframe>
<script>

    window.onload = function () {
        var ifr = document.getElementById('ifr');
        var targetOrigin = 'http://192.168.0.71:8001';  // 若写成'http://b.com/c/proxy.html'效果一样
        // 若写成'http://c.com'就不会执行postMessage了
        ifr.contentWindow.postMessage('I was there!', targetOrigin);

//    var popup = window.open(...popup details...);

        // When the popup has fully loaded, if not blocked by a popup blocker:

        // This does nothing, assuming the window hasn't changed its location.
//    popup.postMessage("The user is 'bob' and the password is 'secret'",
//      "https://secure.example.net");

        // This will successfully queue a message to be sent to the popup, assuming
        // the window hasn't changed its location.
//    popup.postMessage("hello there!", "http://example.com");

        function receiveMessage(event) {
            // Do we trust the sender of this message?  (might be
            // different from what we originally opened, for example).
//      if (event.origin !== "http://10.10.10.68:8001")
//        return;

            // event.source is popup
            // event.data is "hi there yourself!  the secret response is: rheeeeet!"
            console.log('a接收 event', event.data);
        }

        window.addEventListener("message", receiveMessage, false);
    };

</script>
</body>
</html>